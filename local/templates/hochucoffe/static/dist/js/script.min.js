"use strict";var objSetupScroll={cursorcolor:"#eb6a57",cursorborderradius:"5px",hidecursordelay:100,cursorminheight:46};$((function(){var e=window.location.href;e.indexOf("#")>0&&reloadPage(e,parceAjaxUrl(e));window.onhashchange=function(){var e=window.location.href;if(e.indexOf("#")>0){var t=parceAjaxUrl(e);0!==Object.keys(t).length&&reloadPage(e,t)}},$(".catalog__text-box").replaceWith($(".catalog__text")),moreContent(),moreContentChange(),mobileMenu(),adaptiveContent(),searchBtn(),close(),formAjax(),initTabs(),contentOpen(),NoTarget(),ajaxDo(),reinitfuncs(),HeaderSticky(),initScrollGoal(),EventsGa(),SortList(),counter(),slideDown(),scaleHTML(),elementShowMore(),Anchor(),menuBurger(),initSliderImageMove(),catgSort(),searchHint(),changeCardList(),inputValid(),footerMenu(),Ya(),$("input[name='phone']").mask("+7(999)999-99-99")}));var window_width=window.innerWidth;function Ya(){$(document).on("click","#cleversite_call",(function(){ym(71202064,"reachGoal","click_knopka_callback"),console.log("YM:click_knopka_callback")})),$(document).on("click","#cleversite_clever_button",(function(){console.log("YM:click_knopka_chat"),ym(71202064,"reachGoal","click_knopka_chat")}))}function inputValid(){$("input,textarea").each((function(){""!==$(this).val()&&"+7(___)___-__-__"!==$(this).val()&&$(this).addClass("is-valid")})),$(document).on("blur","input,textarea",(function(){""!==$(this).val()&&"+7(___)___-__-__"!==$(this).val()?$(this).addClass("is-valid"):$(this).removeClass("is-valid")}))}function scaleHTML(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));else if(window.innerWidth>640&&window.innerWidth<1480){console.log(window.innerWidth/1650*100+'%"');var e=Math.round(window.innerWidth/1650*100)+"%";$("html").css({zoom:e,"transform-origin":"left top"}),console.log(e)}else $("html").css({zoom:"100%"})}function slideDown(){$(document).on("click",".js-slide-btn",(function(){$(this).siblings(".js-slide-content").slideToggle(500),$(this).toggleClass("is-active")}))}function catgSort(){$(document).on("click",".js-ctg-sort",(function(e){e.preventDefault(),e.stopPropagation();var t=parceAjaxUrl(window.location.href);t.sort=$(this).attr("data-value"),reloadPage(window.location.href,t)}))}function StickyMy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;function o(){var o=$(window).scrollTop(),a=e.offset().top;t.is(".noSticky")||(o>a+e.outerHeight()-t.outerHeight()-2*n?t.removeClass("doFixed").addClass("doFixedBottom"):o>a+n?t.removeClass("doFixedBottom").addClass("doFixed"):o<a-n?t.removeClass("doFixedBottom").removeClass("doFixed"):t.removeClass("isFixedBottom").removeClass("isFixed"))}o(),e.length>0&&t.length>0&&$(window).scroll((function(){o()}))}function counter(){$(document).on("click",".js-plus",(function(){var e=$(this).parents(".js-counter").find("input"),t=+e.val();e.val(t+1),e.trigger("change")})),$(document).on("click",".js-minus",(function(){var e=$(this).parents(".js-counter").find("input"),t=+e.val();t>1&&t-1>=0&&(e.val(t-1),e.trigger("change"))})),$(document).on("focus",".count-block__value",(function(){$(this).attr("current-value",$(this).val()),$(this).val("")})),$(document).on("blur",".count-block__value",(function(){$(this).val()||$(this).val($(this).attr("current-value"))}))}function SortList(){$(document).on("click",".js-sort-list",(function(){closeSelect();var e=$(this),t=e.find(".cst-select"),n=e.offset(),o=Math.floor(100*Math.random())+1;e.parents('[data-select="block"]');t.attr("data-ident",o),e.attr("data-ident",o),t.clone().addClass("is-clone").css({top:n.top+e.outerHeight(),left:n.left,"min-width":e.outerWidth()}).prependTo("body").show(),$(this).toggleClass("is-opened")})),$(document).on("click",".cst-select-option",(function(){var e=$(this).text(),t=$(this).parents(".cst-select").data("ident");$(".js-sort-list[data-ident="+t+"]").find(".cst-select-current").text(e),closeSelect()})),$(document).on("mouseleave",".cst-select.is-clone",(function(){closeSelect()})),$(document).mouseup((function(e){var t=$(".cst-select");t.is(e.target)||0!==t.has(e.target).length||closeSelect()}))}function closeSelect(){$(".cst-select.is-clone").remove()}function select(){}function HeaderSticky(){var e,t=$(".header"),n=($(".main-menu"),t.outerHeight());if(t.css({height:n}),null!=t){function o(){var o=$(window).scrollTop(),i=!0;window.outerWidth<=640&&$(".main-menu__list").is(".is-opened")&&(i=!1),i&&(o>=n&&o<4*n+20?t.is(".is-sticky")||(t.addClass("is-sticky"),console.log("1",o)):o<4*n+20?t.is(".is-sticky")&&(a(),console.log("2",o)):o<e&&o>4*n+20?t.is(".is-sticky")||(t.addClass("is-sticky"),console.log("3")):o>e&&o>4*n&&t.is(".is-sticky")&&(a(),console.log("4")),e=o)}function a(){t.removeClass("is-sticky"),$(".search.is-opened").removeClass("is-opened"),closeMainMenu()}o(),window.onscroll=function(){o()}}}function parceAjaxUrl(e){var t={catalog_ajax_call:"Y"},n=e,o=n.substring(n.indexOf("#")+1).split("&"),a={};for(i in o){var s=o[i];s==parseInt(s)+""?a.count=s:"p"==s.substring(0,1)&&parseInt(s.substring(1))>0?a.page=s:-1==s.indexOf("/")&&jQuery.inArray(s,sort_vals)>=0&&(a.sort=s)}var r=0;for(i in a){if("page"==i)-1===n.indexOf("search")&&-1===window.location.href.indexOf("search")||""==a[i]?""!=a[i]&&(t.PAGEN_1=parseInt(a[i].substring(1))):t.PAGEN_2=parseInt(a[i].substring(1));else if("count"==i)t.count=a[i];else{if(!("sort"==i&&null!=a[i]&&jQuery.inArray(a[i],sort_vals)>=0))return;t.sort=a[i]}void 0!==a[i]&&(o[r]=a[i],r++)}return t}function reloadPage(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){curState={url:e},o||history.pushState(curState,document.title,e);var a=!1;e.indexOf("#")>0?"Y"==t.catalog_ajax_call&&Object.keys(t).length>1&&(a=!0):a=!0,a&&("filter_sec"!==n&&$(".js-ajax-content").css("opacity","0.5"),$.post(BX.util.add_url_param(e,t),t).done((function(e){if(e&&e.length){var o=JSON.parse(e.toString()),a=$(o.filter),i=$(o.items),s=$(o.text),r=o.breadcrumbs,c=o.h1,l=o.nav_cnt,d=o.cloud;if("block"===n){var u=$(".js-ajax-content[data-ajax="+t.ajax+"]");u.length>0&&u.replaceWith(i)}else if("filter_sec"===n)$(".js-ajax-filter").replaceWith(a),$(".js-ajax-content").replaceWith(i),$(".breadcrumbs").replaceWith(r),$(".page-title._type-1").text(c),$(".page-title-note").text(l),$(".catalog__text .page-text").html(s),$(".js-ajax-top").replaceWith(d),moreContent();else if("filter_opros"===n){$(".js-ajax-filter").replaceWith(a);var p=o.res_filter_url;$("#set_filter").attr("href",p).removeAttr("disable")}else if("add"===n){var h=$(i).find('[data-block="block-item"]');$('[data-block="block-list"]').append(h),$(".catg__more").replaceWith($(i).find(".catg__more")),$(".pagination").replaceWith($(i).find(".pagination"))}else $(".js-ajax-content:not(:first):not([data-ajax])").remove(),$(".js-ajax-content:not([data-ajax])").replaceWith(i),console.log(t,"data"),void 0!==t.PAGEN_1&&$("html, body").animate({scrollTop:200},"250");$(".js-ajax-content").css("opacity","1"),reinitfuncs()}})).fail((function(){alert("Не удалось загрузить страницу.\nПопробуйте еще раз или обновите страницу вручную.")})))}}function reinitfuncs(){$("body").on("click",".catalog-tip__show",(function(e){e.preventDefault(),url=$(this).attr("href");var t=parceAjaxUrl(url);reloadPage(url,t,"filter_sec")}))}function playPause(e,t){(t=document.getElementById(t)).paused?(t.play(),e.setAttribute("data-status","pause")):(console.log("not_paused"),t.pause(),e.setAttribute("data-status","play"))}function VolumeOnOf(e,t){(t=document.getElementById(t)).muted?(t.muted=!1,e.setAttribute("data-status","volume")):(t.muted=!0,e.setAttribute("data-status","mute"))}$(window).on("resize",(function(){window.innerWidth!=window_width&&scaleHTML()}));var main_ajax="/local/php_interface/ajax.php";window_width=window.innerWidth;function moreContent(){$(".js-show-more-btn").each((function(){var e=$(this).parents('[data-show_more="block"]'),t=e.attr("data-show_more_height");if(t>0){var n=e.find('[data-show_more="content"]'),o=n.outerHeight();o>t?(n.attr("data-show_more_realheight",o).css({height:t,"overflow-y":"hidden"}),$(this).show()):(e.find(".js-show-more-btn").hide(),e.find(".js-show-more-btn").parents("[class*=__btn-more]").hide())}}))}function moreContentChange(){$(document).on("click",".js-show-more-btn",(function(){var e=$(this),t=e.data(),n=e.parents('[data-show_more="block"]'),o=n.find('[data-show_more="content"]');e.text()===t.show_more_btnshow?(o.animate({height:o.attr("data-show_more_realheight")},500),e.text(t.show_more_btnhide),n.addClass("is-opened")):(o.animate({height:n.attr("data-show_more_height")},500),e.text(t.show_more_btnshow),n.removeClass("is-opened"))}))}function mobileMenu(){$(document).on("click",".js-mob-menu-btn-open, .js-mob-menu-btn-close",(function(e){e.preventDefault(),e.stopPropagation(),$(".main-menu__burger").toggleClass("is-opened"),$(".mob-menu").toggleClass("is-opened")}))}function adaptiveContent(){window.innerWidth<=640?($(".form.is-opened").length>0&&$(".form").removeClass("is-opened"),$(".footer._type-1").length>0&&$(".footer._type-1").removeClass("_type-1").addClass("_type-2 _changed"),0===$(".pers-info.is-moved").length&&(console.log("fff"),$(".pers-info:not(.is-moved)").prependTo(".content").addClass("is-moved"))):$(".footer._type-2._changed").length>0&&$(".footer._type-2._changed").removeClass("_type-2 _changed").addClass("_type-1")}function closeMainMenu(){$(".main-menu__list.is-opened").removeClass("is-opened"),$(".main-menu__burger.is-menu.is-active").removeClass("is-active")}function searchBtn(){$(document).on("click",".search__btn",(function(e){$(this).parents(".search").toggleClass("is-opened")})),$(document).on("click",".search:not(.is-opened) button",(function(e){e.preventDefault(),$(this).parents(".search").addClass("is-opened")})),window.outerWidth>640&&$(document).on("mouseenter",".search__btn",(function(e){e.preventDefault(),$(this).parents(".search").addClass("is-opened"),closeMainMenu()})),$(document).mouseup((function(e){var t=$(".search"),n=t.attr("data-elem-target"),o=$('.js-targ[data-elem="'+n+'"]');t.is(e.target)||0!==t.has(e.target).length||o.is(e.target)||0!==o.has(e.target).length||!t.is(".is-opened")||(t.removeClass("is-opened"),$(".search-hint-ajax").empty())}))}function ajaxDo(){$("body").on("click",".js-do",(function(e){e.preventDefault();var t={};$.each(this.attributes,(function(e,n){var o="";n.name.indexOf("data-")>=0&&""!==(o=n.name.split("data-")[1])&&(t[o]=n.value)}));var n=t.action;if("undefined"!=n){"main_onescreen"==n&&$(".main-slider-goods").fadeOut(1e3);"current_page"===t.action&&window.location.href,$.post(main_ajax,t,(function(e){responseJson(e),$("input[name='phone']").mask("+7(999)999-99-99")}))}}))}function showPopup(e,t){var n=!1;void 0!==t&&(n=!0);var o=$(e).innerHeight(),a=($(window).height()-o)/2;o+160>$(window).height()&&(a=80),n&&"true"===t.absolute&&(a=$(window).scrollTop()+a);var i=468,s=0;n&&void 0!==t.widthCss&&(i=t.widthCss),s=n&&void 0!==t.marLeft?t.marLeft:-i/2,$(e).css({width:i,"margin-left":s}),n&&void 0!==t.className&&$(e).addClass(t.className),n&&void 0===t.darkLay&&$(".form-dark").fadeIn("slow"),"self"!==t.top&&$(e).css("top",a),$(e).addClass("is-show")}function close(){$(document).on("click",".popup__close, .form-dark, .js-popup-close",(function(e){closePopup(),($(this).parents(".popup-dop").length>0||"form-dark"===e.target.className)&&($(".popup-dop").attr("style","").attr("class","popup-dop").empty(),$(".form-dark").fadeOut())}))}function closePopup(){$(".popup").removeClass("is-show").fadeOut().empty(),$(".popup-dop").is(".is-show")||$(".form-dark").fadeOut()}function formAjax(){$(document).on("submit","form",(function(e){var t=$(this);$(".popup-content__errors").remove(),$("input,textarea",t).removeClass("is-error");var n=$(this).serializeArray(),o=!1;if($.each(n,(function(e,t){"action"==t.name&&""!=t.value&&(o=!0)})),o){e.preventDefault();var a=$(this).serialize();$.post(main_ajax,a,(function(e){responseJson(e)}))}}))}function responseJson(e){var t=JSON.parse(e);console.log(t),t.func||"ok"!=t.error?t.func||"error"!=t.error||alert(t.message):$(t.selector).html(t.result);var n=new Function(t.func);n(),$("input[name='phone']").mask("+7(999)999-99-99")}function moodBoards(){if($(".moodboards__content").length>0){var e=$(".moodboards__content");e.imagesLoaded((function(){e.masonry({columnWidth:e.innerWidth/2,itemSelector:".page-about__moodboard-pic"})}))}}function initTabs(){if(0===$(".js-tabs").length)return!1;$("body").on("click",".js-switch-tab",(function(e){e.preventDefault();var t=$(this),n=$(this).parents(".js-tabs"),o=$(this).attr("data-tab-goal");n.find(".js-switch-tab.is-active").removeClass("is-active"),t.addClass("is-active"),n.find(".js-content-tab.is-active").removeClass("is-active"),$(o).addClass("is-active")}))}function contentOpen(){$("body").on("click",".js-open",(function(){$('[data-open="main-block"]').removeClass("is-opened"),$(this).parents('[data-open="main-block"]').toggleClass("is-opened")}))}function NoTarget(){$(document).mouseup((function(e){var t=$(".page-filter__field"),n=$(".page-filter__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened");t=$(".kontakty-filter__field"),n=$(".kontakty__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened");t=$(".header-city__field"),n=$(".header-city__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened");t=$(".main-menu__list"),n=$(".js-link.is-menu");t.is(e.target)||0!==t.has(e.target).length||n.is(e.target)||0!==n.has(e.target).length||closeMainMenu(),(t=$(".footer-menu__b")).is(e.target)||0!==t.has(e.target).length||$(".footer-menu__b").removeClass("is-opened")}))}function initProductDetailPhotoGallery(){var e=new Swiper(".prod__tmbs",{spaceBetween:20,slidesPerView:6,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0});new Swiper(".prod__image.swiper-container",{slidesPerView:1,spaceBetween:0,navigation:{nextEl:".prod__image .swiper-button-next",prevEl:".prod__image .swiper-button-prev"},pagination:{el:".prod__image .swiper__bullet",type:"bullets",dynamicBullets:!0,clickable:!0},thumbs:{swiper:e}})}function inBasket(e,t,n,o){if(n>0){var a='<div class="count-block js-counter">\n                            <div class="count-block__btn js-minus icon-2b_minus"></div>\n                            <input class="count-block__value" value="'+t+'" data-bid="'+n+'" data-action="basket_change">\n                            <div class="count-block__btn js-plus icon-2a_plus"></div>\n                        </div>';t||(t=1),$(e).length>0&&$(e).removeClass("js-do").html(a)}}function inDelay(e,t){var n=$('.js-do[data-action=delay_change][data-id="'+e+'"]');"Y"===t?($(n).addClass("is-active"),$(n).attr("data-state","Y"),$(n).find("._text").text("В отложенном")):"N"===t&&($(n).removeClass("is-active"),$(n).attr("data-state","N"),$(n).find("._text").text("Отложить"))}function inDelayList(e){e&&e.length>0&&e.forEach((function(e,t,n){inDelay(e,"Y")}))}function initScrollGoal(){$(document).on("click",".js-scrollto",(function(){var e=$(this).data("scrollto_goal");$("html, body").animate({scrollTop:$(e).offset().top-150},"250")}))}function EventsGa(){var e={click:{0:{element:".js-event-1",event_ga:"ga('send', 'event', 'brand_page', 'download_katalog');"}}};Object.keys(e).forEach((function(t,n){for(var o=function(n){$(document).on(t,e[t].element,(function(){e[t][n].event_ga}))},a=0;a<Object.keys(e[t]).length;a++)o(a)}))}function elementShowMore(){$(".js-more-list").each((function(e){var t=$(this).attr("data-resolution-less"),n=!0;t>0&&window.innerWidth>t&&(n=!1),console.log(n,"flag");var o=new toHideList($(this));n?$(this).find(".js-more-btn").on("click",(function(){o.click($(this))})):o.unbind($(this).attr("data-btn-name"))}))}function Anchor(){$(document).on("click",".js-anchor",(function(e){e.preventDefault();var t=$(this),n=$(t.attr("href")).offset().top;$("html").animate({scrollTop:n-50},500)}))}function menuBurger(){$(document).on("click",".js-link.is-menu",(function(e){e.preventDefault(),$(".main-menu__list").toggleClass("is-opened"),$(".main-menu__burger.is-menu").toggleClass("is-active")})),$(document).on("click",".main-menu__item-btn",(function(e){e.preventDefault(),$(this).parents(".main-menu__item-wrap").find(".main-menu__submenu").length>0&&($(this).parents(".main-menu__item-wrap.is-opened-sub").length>0||$(".main-menu__item-wrap.is-opened-sub").removeClass("is-opened-sub"),$(this).parents(".main-menu__item-wrap").toggleClass("is-opened-sub"))})),window.outerWidth>640&&$(document).on("mouseenter",".main-menu__item-wrap",(function(e){e.preventDefault(),$(".main-menu__item-wrap.is-opened-sub").removeClass("is-opened-sub"),$(this).addClass("is-opened-sub")}))}function initSliderImageMove(){$(".js-slide-ix-block:not(.initialized)").length>0&&$(".js-slide-ix-block:not(.initialized)").mangoSlider()}$(window).on("resize",(function(){window.innerWidth!=window_width&&adaptiveContent()})),$(document).on("dragover",".standard-form__dis-btn",(function(e){e.stopPropagation(),$(this).addClass("is-hover")})),$(document).on("dragleave dragend drop",".standard-form__dis-btn",(function(e){e.stopPropagation(),$(this).removeClass("is-hover")}));var timeOutVal=!1;function searchHint(){function e(e,t,n,o,a){$(".search-hint-ajax").empty(),$.post("/local/php_interface/ajax/search-hint.php",{q:e,state:a,section:o},(function(e){n.find(".search-hint-ajax").replaceWith(e),clearTimeout(t)}))}$(document).on("keyup",'.search__form input[name="q"]',(function(){var t=$(this)[0].value,n=$(this).parents(".search"),o=n.find(".search__form-section").attr("data-section_id");clearTimeout(timeOutVal),t.length>2&&(timeOutVal=setTimeout((function(){e(t,timeOutVal,n,o,"")}),300))})),$(document).on("focus",'.search__form input[name="q"]',(function(){var t=$(this)[0].value,n=$(this).parents(".search"),o=n.find(".search__form-section").attr("data-section_id");o<=0&&(clearTimeout(timeOutVal),timeOutVal=setTimeout((function(){e(t,timeOutVal,n,o,"empty")}),100))})),$(document).mouseup((function(e){$(".search")})),$(document).on("click",".search-hint__btn-close",(function(e){$(this).parents(".search-hint-ajax").empty()}))}function changeCardList(){$(document).on("click",".js-list-card",(function(){var e=$(this).data();e.ajax="list-card";var t=$(this).parents(".cst-select").attr("data-ident"),n=$(".js-sort-list[data-ident="+t+"]").parents(".catg__item .catg__item-wrap");console.log(t,n,"parent"),$.post(main_ajax,e,(function(e){var t=JSON.parse(e);n.animate({opacity:0},200).replaceWith(t.result).animate({opacity:1},200)}))}))}function flyProd(e){if(void 0!==e){var t=$(e).parents(".popup__content").find(".popup__img");if(void 0!==t){var n=$(".pers-info__item.is-basket"),o=t.width();t.clone().css({width:o,position:"absolute","z-index":"9999",top:t.offset().top,left:t.offset().left}).appendTo("body").animate({opacity:.05,left:n.offset().left,top:n.offset().top,width:20},1e3,(function(){$(this).remove()}))}}}function footerMenu(){$(document).on("click",".footer-menu__btn",(function(){$(this).parents(".footer-menu__b.is-opened").length>0||$(".footer-menu__b.is-opened").removeClass("is-opened"),$(this).parents(".footer-menu__b").toggleClass("is-opened")}))}