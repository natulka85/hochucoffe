"use strict";function formatFileSize(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}$((function(){$(".js-upload").fileupload({maxChunkSize:1e7,url:"/local/php_interface/ajax/upload_selection.php",dropZone:$(this).find(".js-upload-drop"),dataType:"json",add:function(e,o){console.log(o),o.context=$(this).find(".js-file-box");o.submit()},progress:function(e,o){var i=parseInt(o.loaded/o.total*100,10);100==i&&o.context.removeClass("working")},fail:function(e,o){o.context.addClass("error"),console.log("error"),console.log(o)},done:function(e,o){if(console.log("done"),"no_valid"===o.result.message){return $("body").prepend('<div class="popup__box is-selection-alert"><div class="popup__title"><span class="popup-title-text">Подбор по фото</span></div><div class="js-popup-close-only-this close-popup-btn"></div><div class="popup__subtile">Разрешены следующие расширения файлов: jpg, gif, bmp, png, jpeg, heic. Для изображений других форматов, напишите нам письмо на email: <a href="mailto:info@hochucoffe.ru?subject=Подбор по фото">info@hochucoffe.ru</a> с темой: «Подбор по фото»</div><div class="popup__btn-wrapp"><div class="popup__btn btn_c is-green js-popup-close-only-this">Закрыть</div></div></div>'),$(".popup__box.selection-alert").remove(),void showPopup($(".popup__box.is-selection-alert"))}if("success"===o.result.status){var i="",s=o.result.files.size+"_"+o.result.files.name;i=o.result.files.size>=1e6?Math.round(o.result.files.size/1e6,1)+" M":Math.round(o.result.files.size/1e3,1)+" Кб";var t=$('<div class="file-inputed__item"><input type="hidden" value="'+s+'" name="filenm[]"><div class="file-inputed__name">'+o.files[0].name+" - "+i+'</div><div class="file-inputed__close icon-1x_close"></div></div>');o.context=t.appendTo($(this).find(".js-file-box")),t.find(".file-inputed__close").click((function(){t.hasClass("working")&&jqXHR.abort(),t.fadeOut((function(){t.remove()}))})),$('<input type="hidden" value="'+o.result.path+'" name="fpath">').appendTo(o.form)}}}),$(document).on("drop dragover",(function(e){e.preventDefault()}))}));