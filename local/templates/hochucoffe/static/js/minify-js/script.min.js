var objSetupScroll={cursorcolor:"#eb6a57",cursorborderradius:"5px",hidecursordelay:100,cursorminheight:46};$((function(){var e=window.location.href;e.indexOf("#")>0&&reloadPage(e,parceAjaxUrl(e));window.onhashchange=function(){var e=window.location.href;if(e.indexOf("#")>0){var t=parceAjaxUrl(e);0!==Object.keys(t).length&&reloadPage(e,t)}},SlickSliders(),moreContent(),moreContentChange(),mobileMenu(),adaptiveContent(),close(),formAjax(),select(),initTabs(),contentOpen(),NoTarget(),ajaxDo(),nicescrollInit(),reinitfuncs(),HeaderSticky(),initScrollGoal(),EventsGa(),SortList(),counter(),slideDown(),scaleHTML(),elementShowMore(),Anchor(),menuBurger(),initSliderImageMove(),catgSort(),searchHint(),changeCardList(),$("input[name='phone']").mask("+7(999)999-99-99")}));var window_width=window.innerWidth;function scaleHTML(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));else if(window.innerWidth>640&&window.innerWidth<1480){console.log(window.innerWidth/1650*100+'%"');var e=window.innerWidth/1650*100+"%";$("html").css({zoom:e,"transform-origin":"left top"}),console.log(e)}else $("html").css({zoom:"100%"})}function slideDown(){$(document).on("click",".js-slide-btn",(function(){$(this).siblings(".js-slide-content").slideToggle(500)}))}function catgSort(){$(document).on("click",".js-ctg-sort",(function(e){e.preventDefault(),e.stopPropagation();var t=parceAjaxUrl(window.location.href);t.sort=$(this).attr("data-value"),reloadPage(window.location.href,t)}))}function StickyMy(e,t,i=0){e.length>0&&t.length>0&&$(window).scroll((function(){var o=$(window).scrollTop(),n=e.offset().top;o>n+e.outerHeight()-t.outerHeight()-2*i?t.removeClass("doFixed").addClass("doFixedBottom"):o>n+i?t.removeClass("doFixedBottom").addClass("doFixed"):o<n-i&&t.removeClass("doFixedBottom").removeClass("doFixed")}))}function counter(){$(document).on("click",".js-plus",(function(){var e=$(this).parents(".js-counter").find("input");let t=+e.val();e.val(t+1),e.trigger("change")})),$(document).on("click",".js-minus",(function(){var e=$(this).parents(".js-counter").find("input");let t=+e.val();t>1&&t-1>=0&&(e.val(t-1),e.trigger("change"))})),$(document).on("focus",".count-block__value",(function(){$(this).attr("current-value",$(this).val()),$(this).val("")})),$(document).on("blur",".count-block__value",(function(){$(this).val()||$(this).val($(this).attr("current-value"))}))}function SortList(){$(document).on("click",".js-sort-list",(function(){$(this).toggleClass("is-opened")})),$(document).on("click",".cst-select-option",(function(){var e=$(this).text();$(this).siblings().removeClass("is-active"),$(this).addClass("is-active"),$(this).parents(".cst-select-list").find(".cst-select-current").text(e)})),$(document).on("mouseleave",".catg__item, .basket__el",(function(){$(this).find(".js-sort-list").removeClass("is-opened")}))}function select(){}function HeaderSticky(){window.onscroll=function(){window.pageYOffset>=t+10?i.addClass("is-sticky").prependTo(".content"):$("#header.is-sticky").remove()};var e=document.getElementById("header");if(null!=e){var t=e.offsetTop,i=$(e).clone(!0)}}function parceAjaxUrl(e){var t={catalog_ajax_call:"Y"},o=e,n=o.substring(o.indexOf("#")+1).split("&"),s={};for(i in n){var a=n[i];a==parseInt(a)+""?s.count=a:"p"==a.substring(0,1)&&parseInt(a.substring(1))>0?s.page=a:-1==a.indexOf("/")&&jQuery.inArray(a,sort_vals)>=0&&(s.sort=a)}var l=0;for(i in s){if("page"==i)-1===o.indexOf("search")&&-1===window.location.href.indexOf("search")||""==s[i]?""!=s[i]&&(t.PAGEN_1=parseInt(s[i].substring(1))):t.PAGEN_2=parseInt(s[i].substring(1));else if("count"==i)t.count=s[i];else{if(!("sort"==i&&null!=s[i]&&jQuery.inArray(s[i],sort_vals)>=0))return;t.sort=s[i]}void 0!==s[i]&&(n[l]=s[i],l++)}return t}function reloadPage(e,t,i,o=!1){if(void 0!==t){curState={url:e},o||history.pushState(curState,document.title,e);var n=!1;e.indexOf("#")>0?"Y"==t.catalog_ajax_call&&Object.keys(t).length>1&&(n=!0):n=!0,n&&("filter_sec"!==i&&$(".js-ajax-content").css("opacity","0.5"),console.log(t,e,i,"3"),$.post(BX.util.add_url_param(e,t),t).done((function(e){if(console.log($res),e&&e.length){var o=JSON.parse(e.toString()),n=$(o.filter),s=$(o.items),a=o.breadcrumbs;o.h1;if("block"===i){var l=$(".js-ajax-content[data-ajax="+t.ajax+"]");l.length>0&&l.replaceWith(s)}else"filter_sec"===i?($(".js-ajax-filter").replaceWith(n),$(".js-ajax-content").replaceWith(s),$(".breadcrumbs").replaceWith(a)):($(".js-ajax-content:not(:first):not([data-ajax])").remove(),$(".js-ajax-content:not([data-ajax])").replaceWith(s),console.log(t,"data"),void 0!==t.PAGEN_1&&$("html, body").animate({scrollTop:200},"250"));$(".js-ajax-content").css("opacity","1"),reinitfuncs()}})).fail((function(){alert("Не удалось загрузить страницу.\nПопробуйте еще раз или обновите страницу вручную.")})))}}function reinitfuncs(){$("body").on("click",".catalog-tip__show",(function(e){e.preventDefault(),url=$(this).attr("href");var t=parceAjaxUrl(url);reloadPage(url,t,"filter_sec")}))}function playPause(e,t){(t=document.getElementById(t)).paused?(t.play(),e.setAttribute("data-status","pause")):(console.log("not_paused"),t.pause(),e.setAttribute("data-status","play"))}function VolumeOnOf(e,t){(t=document.getElementById(t)).muted?(t.muted=!1,e.setAttribute("data-status","volume")):(t.muted=!0,e.setAttribute("data-status","mute"))}$(window).on("resize",(function(){window.innerWidth!=window_width&&scaleHTML()}));var main_ajax="/local/php_interface/ajax.php";window_width=window.innerWidth;function SlickSliders(){if($(".banner__list").length>0&&($(".banner__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:1,infinite:!0,autoplay:!0,pauseOnHover:!0,autoplaySpeed:3e3,dots:!0,speed:2e3,lazyLoad:"ondemand"}),$(".banner .slick-dots, .banner .slick-arrow").on("click",(function(){$(".banner__list").slick("slickPause")}))),$(".sections__list").length>0){$(".sections__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:3,infinite:!0,autoplay:!1,autoplaySpeed:3e3,cssEase:"linear",pauseOnHover:!0,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".sections__list .slick-dots, .sections__list .slick-arrow").on("click",(function(){$(".sections__list").slick("slickPause")}))}$(".view__list").length>0&&($(".view__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:1,infinite:!0,autoplay:!0,pauseOnHover:!0,speed:1e3,fade:!0}),$(".view__list .slick-dots, .view__list .slick-arrow").on("click",(function(){$(".view__list").slick("slickPause")}))),$(".your-interests .catg__list").length>0&&$(".your-interests .catg__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!0,autoplay:!1,dots:!0,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".your-viewed .catg__list").length>0&&$(".your-viewed .catg__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!0,autoplay:!1,dots:!0,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".utp__list").length>0&&$(".utp__list:not(.slick-initialized)").slick({slidesToScroll:6,slidesToShow:6,infinite:!0,autoplay:!1,arrows:!1,dots:!1,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:3,slidesToScroll:3}}]}),$(".hits .catg__list").length>0&&$(".hits .catg__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!1,autoplay:!1,arrows:!1,dots:!1,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".sale .catg__list").length>0&&$(".sale .catg__list:not(.slick-initialized)").slick({slidesToScroll:5,slidesToShow:5,infinite:!1,autoplay:!1,arrows:!1,dots:!1,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:2}}]}),$(".reviews__list").length>0&&$(".reviews__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!1,autoplay:!1,arrows:!1,dots:!1,lazyLoad:"ondemand",responsive:[{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:2}}]})}function moreContent(){$(".js-show-more-btn").each((function(){var e=$(this).parents('[data-show_more="block"]'),t=e.attr("data-show_more_height");if(t>0){var i=e.find('[data-show_more="content"]'),o=i.outerHeight();o>t&&(i.attr("data-show_more_realheight",o).css({height:t}),$(this).show())}}))}function moreContentChange(){$(document).on("click",".js-show-more-btn",(function(){var e=$(this),t=e.data(),i=e.parents('[data-show_more="block"]'),o=i.find('[data-show_more="content"]');e.text()===t.show_more_btnshow?(o.animate({height:o.attr("data-show_more_realheight")},500),e.text(t.show_more_btnhide),i.addClass("is-opened")):(o.animate({height:i.attr("data-show_more_height")},500),e.text(t.show_more_btnshow),i.removeClass("is-opened"))}))}function mobileMenu(){$(document).on("click",".js-mob-menu-btn-open, .js-mob-menu-btn-close",(function(e){e.preventDefault(),e.stopPropagation(),$(".main-menu__burger").toggleClass("is-opened"),$(".mob-menu").toggleClass("is-opened")})),$(document).on("click",".mob-menu__list-item.is-submenu > .mob-menu__list-link",(function(e){e.preventDefault(),$(this).parents(".mob-menu__list-item.is-submenu").toggleClass("is-opened"),$(this).siblings(".mob-menu__list-submenu").slideToggle(500)})),$(document).on("mouseleave",".mob-menu.is-opened",(function(){$(".main-menu__burger").toggleClass("is-opened"),$(".mob-menu").toggleClass("is-opened")}))}function adaptiveContent(){window.innerWidth<=640?($(".form.is-opened").length>0&&$(".form").removeClass("is-opened"),$(".footer._type-1").length>0&&$(".footer._type-1").removeClass("_type-1").addClass("_type-2 _changed")):$(".footer._type-2._changed").length>0&&$(".footer._type-2._changed").removeClass("_type-2 _changed").addClass("_type-1")}function searchBtn(){window_width>991&&($(document).on("click",'.search-block:not(".is-opened") button',(function(e){e.preventDefault(),$(this).parents(".search-block").addClass("is-opened")})),$(document).mouseup((function(e){var t=$("[data-elem-target]"),i=t.attr("data-elem-target"),o=$('.js-targ[data-elem="'+i+'"]');t.is(e.target)||0!==t.has(e.target).length||o.is(e.target)||0!==o.has(e.target).length||!t.is(".is-opened")||t.removeClass("is-opened")})))}function ajaxDo(){$("body").on("click",".js-do",(function(e){e.preventDefault();var t=$(this).data("action");if("undefined"!=t){"main_onescreen"==t&&$(".main-slider-goods").fadeOut(1e3);"current_page"===$(this).data("action")&&window.location.href,$.post(main_ajax,$(this).data(),(function(e){responseJson(e),$("input[name='phone']").mask("+7(999)999-99-99")}))}}))}function showPopup(e,t){var i=!1;void 0!==t&&(i=!0);var o=$(e).innerHeight(),n=($(window).height()-o)/2;o+160>$(window).height()&&(n=80);var s=468,a=0;i&&void 0!==t.widthCss&&(s=t.widthCss),a=i&&void 0!==t.marLeft?t.marLeft:-s/2,"true"===t.cssAuto&&$(e).css({width:s,"margin-left":a}),i&&void 0===t.darkLay&&$(".form-dark").fadeIn("slow"),"self"!==t.top&&$(e).css("top",n),$(e).addClass("is-show")}function close(){$(document).on("click",".popup__close, .form-dark",(function(){closePopup()}))}function closePopup(){$(".popup").empty(),$(".popup").fadeOut(),$(".form-dark").fadeOut()}function formAjax(){$(document).on("submit","form",(function(e){var t=$(this);$(".popup-content__errors").remove(),$("input",t).removeClass("is-error");var i=$(this).serializeArray(),o=!1;if($.each(i,(function(e,t){"action"==t.name&&""!=t.value&&(o=!0)})),o){e.preventDefault();var n=$(this).serialize();$.post(main_ajax,n,(function(e){responseJson(e)}))}}))}function responseJson(e,t=!0){var i=JSON.parse(e);console.log(i),i.func||"ok"!=i.error?i.func||"error"!=i.error||alert(i.message):$(i.selector).html(i.result),new Function(i.func)(),$("input[name='phone']").mask("+7(999)999-99-99")}function moodBoards(){if($(".moodboards__content").length>0){var e=$(".moodboards__content");e.imagesLoaded((function(){e.masonry({columnWidth:e.innerWidth/2,itemSelector:".page-about__moodboard-pic"})}))}}function initTabs(){if(0===$(".js-tabs").length)return!1;$("body").on("click",".js-switch-tab",(function(e){e.preventDefault();var t=$(this),i=$(this).parents(".js-tabs"),o=$(this).attr("data-tab-goal");i.find(".js-switch-tab.is-active").removeClass("is-active"),t.addClass("is-active"),i.find(".js-content-tab.is-active").removeClass("is-active"),$(o).addClass("is-active")}))}function contentOpen(){$("body").on("click",".js-open",(function(){$('[data-open="main-block"]').removeClass("is-opened"),$(this).parents('[data-open="main-block"]').toggleClass("is-opened")}))}function NoTarget(){$(document).mouseup((function(e){var t=$(".page-filter__field");$(".page-filter__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened");t=$(".kontakty-filter__field"),$(".kontakty__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened");t=$(".header-city__field"),$(".header-city__popup");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("is-opened")}))}function initProductDetailPhotoGallery(){$(".js-slick-3").length>0&&($(".js-slick-3:not(.slick-initialized)").slick({slidesToScroll:1,draggable:!1,slidesToShow:1,infinite:!0,accessibility:!1,dots:!0,fade:!1,lazyLoad:"ondemand",asNavFor:".js-slick-nav-3"}),$(".js-slick-nav-3:not(.slick-initialized)").slick({slidesToShow:3,slidesToScroll:1,arrows:!1,asNavFor:".js-slick-3",variableWidth:!0,focusOnSelect:!0,centerMode:!1,infinite:!1}))}function inBasket(e,t){t||(t=1),$(e).addClass("inbasket").removeClass("js-do").attr("href","/personal/basket/").attr("onclick","window.location.href = '/personal/basket/'").attr("data-before",t).text("В корзине"),$(e).hover((function(){$(this).text("Оформить")}),(function(){$(this).text("В корзине")}))}function inDelay(e){$(e).hasClass("checkbox__label")||$(e).hasClass("js-state-reverse")?($(e).addClass("is-active"),$(e).data("state","Y"),$(e).parent().find("input").prop("checked",!0)):($(e).off(),$(e).addClass("is-active").removeClass("js-do"))}function inDelayList(e){e.forEach((function(e,t,i){inDelay($('.js-do[data-action=delay_change][data-id="'+e+'"]'))}))}function nicescrollInit(){$("#nicescroll").niceScroll(objSetupScroll)}function initScrollGoal(){$(document).on("click",".js-scrollto",(function(){var e=$(this).data("scrollto_goal");$("html, body").animate({scrollTop:$(e).offset().top-150},"250")}))}function EventsGa(){var e={click:{0:{element:".js-event-1",event_ga:"ga('send', 'event', 'brand_page', 'download_katalog');"}}};Object.keys(e).forEach((function(t,i){for(let i=0;i<Object.keys(e[t]).length;i++)$(document).on(t,e[t].element,(function(){e[t][i].event_ga}))}))}function elementShowMore(){$(".js-more-list").each((function(e){var t=$(this).attr("data-resolution-less"),i=!0;t>0&&window.innerWidth>t&&(i=!1),console.log(i,"flag");var o=new toHideList($(this));i?$(this).find(".js-more-btn").on("click",(function(){o.click($(this))})):o.unbind($(this).attr("data-btn-name"))}))}function Anchor(){$(document).on("click",".js-anchor",(function(e){e.preventDefault();var t=$(this),i=$(t.attr("href")).offset().top;console.log(i,"destination"),$("html").animate({scrollTop:i-50},500)}))}function menuBurger(){$(document).on("click",".js-link.is-menu",(function(e){e.preventDefault(),$(".main-menu__list").toggle(300)}))}function initSliderImageMove(){$(".js-slide-ix-block:not(.initialized)").length>0&&$(".js-slide-ix-block:not(.initialized)").mangoSlider()}$(window).on("resize",(function(){window.innerWidth!=window_width&&adaptiveContent()})),$(document).on("dragover",".standard-form__dis-btn",(function(e){e.stopPropagation(),$(this).addClass("is-hover")})),$(document).on("dragleave dragend drop",".standard-form__dis-btn",(function(e){e.stopPropagation(),$(this).removeClass("is-hover")}));var timeOutVal=!1;function searchHint(){function e(e,t,i,o,n){console.log("empty"),$(".search-hint-ajax").empty(),$.post("/local/php_interface/ajax/search-hint.php",{q:e,state:n,section:o},(function(e){i.find(".search-hint-ajax").replaceWith(e),clearTimeout(t)}))}$(document).on("keyup",'.search__form input[name="q"]',(function(){var t=$(this)[0].value,i=$(this).parents(".search"),o=i.find(".search__form-section").attr("data-section_id");clearTimeout(timeOutVal),t.length>2&&(timeOutVal=setTimeout((function(){e(t,timeOutVal,i,o,"")}),300))})),$(document).on("focus",'.search__form input[name="q"]',(function(){var t=$(this)[0].value,i=$(this).parents(".search"),o=i.find(".search__form-section").attr("data-section_id");o<=0&&(clearTimeout(timeOutVal),timeOutVal=setTimeout((function(){e(t,timeOutVal,i,o,"empty")}),100))})),$(document).mouseup((function(e){var t=$(".search");t.is(e.target)||0!==t.has(e.target).length||t.find(".search-hint-ajax").empty()}))}function changeCardList(){$(document).on("click",".js-list-card",(function(){var e=$(this).data(),t=$(this).parents(".catg__item");$.post(main_ajax,e,(function(e){var i=JSON.parse(e);t.animate({opacity:0},200).replaceWith(i.result).animate({opacity:1},200)}))}))}function changeCardList(){$(document).on("click",".js-product-card",(function(){reloadPage("/local/php_interface/ajax/product_card.php",$(this).data(),"chose_card_weight",!0)}))}