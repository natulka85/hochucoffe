var objSetupScroll={cursorcolor:"#eb6a57",cursorborderradius:"5px",hidecursordelay:100,cursorminheight:46};function slideDown(){$(document).on("click",".js-slide-btn",(function(){$(this).siblings(".js-slide-content").slideToggle(500)}))}function Sticky(t,e,n=0){t.length>0&&e.length>0&&$(window).scroll((function(){var o=$(window).scrollTop(),i=t.offset().top;o>i+t.outerHeight()-e.outerHeight()-2*n?e.removeClass("doFixed").addClass("doFixedBottom"):o>i+n?e.removeClass("doFixedBottom").addClass("doFixed"):o<i-n&&e.removeClass("doFixedBottom").removeClass("doFixed")}))}function counter(){$(document).on("click",".js-plus",(function(){var t=$(this).parents(".js-counter").find("input");let e=+t.val();t.val(e+1)})),$(document).on("click",".js-minus",(function(){var t=$(this).parents(".js-counter").find("input");let e=+t.val();e>1&&e-1>=0&&t.val(e-1)})),$(document).on("focus",".count-block__value",(function(){console.log("test"),$(this).attr("current-value",$(this).val()),$(this).val("")})),$(document).on("blur",".count-block__value",(function(){$(this).val()||$(this).val($(this).attr("current-value"))}))}function SortList(){$(document).on("click",".js-sort-list",(function(){$(this).toggleClass("is-opened")})),$(document).on("click",".cst-select-option",(function(){var t=$(this).text();$(this).siblings().removeClass("is-active"),$(this).addClass("is-active"),$(this).parents(".cst-select-list").find(".cst-select-current").text(t)})),$(document).on("mouseleave",".catg__item, .basket__el",(function(){$(this).find(".js-sort-list").removeClass("is-opened")}))}function select(){}function HeaderSticky(){window.onscroll=function(){window.pageYOffset>=e+10?n.addClass("is-sticky").prependTo(".content"):$("#header.is-sticky").remove()};var t=document.getElementById("header");if(null!=t){var e=t.offsetTop,n=$(t).clone(!0)}}function parceAjaxUrl(t){var e={catalog_ajax_call:"Y"},n=t,o=n.substring(n.indexOf("#")+1).split("&"),s={};for(i in o){var a=o[i];a==parseInt(a)+""?s.count=a:"p"==a.substring(0,1)&&parseInt(a.substring(1))>0?s.page=a:-1==a.indexOf("/")&&jQuery.inArray(a,sort_vals)>=0&&(s.sort=a)}var l=0;for(i in s){if("page"==i)-1===n.indexOf("search")&&-1===window.location.href.indexOf("search")||""==s[i]?""!=s[i]&&(e.PAGEN_1=parseInt(s[i].substring(1))):e.PAGEN_2=parseInt(s[i].substring(1));else if("count"==i)e.count=s[i];else{if(!("sort"==i&&null!=s[i]&&jQuery.inArray(s[i],sort_vals)>=0))return;e.sort=s[i]}void 0!==s[i]&&(o[l]=s[i],l++)}return e}function reloadPage(t,e,n,o=!1){if(void 0!==e){curState={url:t},o||history.pushState(curState,document.title,t);var i=!1;t.indexOf("#")>0?"Y"==e.catalog_ajax_call&&Object.keys(e).length>1&&(i=!0):i=!0,i&&("filter_sec"!==n&&$(".js-ajax-content").css("opacity","0.5"),$.post(BX.util.add_url_param(t,e),e).done((function(t){if(t&&t.length){var o=JSON.parse(t.toString()),i=$(o.filter),s=$(o.items),a=$(o.catlist),l=o.breadcrumbs,r=o.h1;if("block"===n){var c=$(".js-ajax-content[data-ajax="+e.ajax+"]");c.length>0&&c.replaceWith(s)}else"filter_sec"===n?($(".js-ajax-content:not(:first):not([data-ajax])").remove(),$(".js-ajax-filter").replaceWith(i),$(".js-ajax-catlist").replaceWith(a),$(".js-ajax-content:not([data-ajax])").replaceWith(s),$(".breadcrumbs").replaceWith(l),$(".screen-title._type-1").text(r),$("title").text(o.title),$("[name=description]").attr("content",o.description)):($(".js-ajax-content:not(:first):not([data-ajax])").remove(),$(".js-ajax-content:not([data-ajax])").replaceWith(s),$(".js-ajax-catlist").replaceWith(a),console.log(e,"data"),void 0!==e.PAGEN_1&&$("html, body").animate({scrollTop:200},"250"));$(".js-ajax-content").css("opacity","1"),reinitfuncs()}})).fail((function(){alert("Не удалось загрузить страницу.\nПопробуйте еще раз или обновите страницу вручную.")})))}}function reinitfuncs(){$("body").on("click",".catalog-tip__show",(function(t){t.preventDefault(),url=$(this).attr("href");var e=parceAjaxUrl(url);reloadPage(url,e,"filter_sec")}))}function playPause(t,e){(e=document.getElementById(e)).paused?(e.play(),t.setAttribute("data-status","pause")):(console.log("not_paused"),e.pause(),t.setAttribute("data-status","play"))}function VolumeOnOf(t,e){(e=document.getElementById(e)).muted?(e.muted=!1,t.setAttribute("data-status","volume")):(e.muted=!0,t.setAttribute("data-status","mute"))}$((function(){var t=window.location.href;t.indexOf("#")>0&&reloadPage(t,parceAjaxUrl(t));window.onhashchange=function(){var t=window.location.href;if(t.indexOf("#")>0){var e=parceAjaxUrl(t);0!==Object.keys(e).length&&reloadPage(t,e)}},SlickSliders(),moreContent(),moreContentChange(),mobileMenu(),adaptiveContent(),close(),formAjax(),select(),initTabs(),contentOpen(),NoTarget(),initProductDetailPhotoGallery(),ajaxDo(),nicescrollInit(),reinitfuncs(),HeaderSticky(),initScrollGoal(),EventsGa(),SortList(),counter(),slideDown(),$("input[name='phone']").mask("+7(999)999-99-99")}));var main_ajax="/local/php_interface/ajax.php",window_width=window.innerWidth;function SlickSliders(){if($(".banner__list").length>0&&($(".banner__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:1,infinite:!0,autoplay:!0,pauseOnHover:!0,autoplaySpeed:3e3,dots:!0,speed:2e3,lazyLoad:"ondemand"}),$(".banner .slick-dots, .banner .slick-arrow").on("click",(function(){$(".banner__list").slick("slickPause")}))),$(".sections__list").length>0){$(".sections__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:3,infinite:!0,autoplay:!0,autoplaySpeed:3e3,cssEase:"linear",pauseOnHover:!0,lazyLoad:"ondemand"}),$(".sections__list .slick-dots, .sections__list .slick-arrow").on("click",(function(){$(".sections__list").slick("slickPause")}))}$(".view__list").length>0&&($(".view__list:not(.slick-initialized)").slick({slidesToScroll:1,slidesToShow:1,infinite:!0,autoplay:!0,pauseOnHover:!0,speed:1e3}),$(".view__list .slick-dots, .view__list .slick-arrow").on("click",(function(){$(".view__list").slick("slickPause")}))),$(".your-interests .catg__list").length>0&&$(".your-interests .catg__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!0,autoplay:!1,dots:!0,lazyLoad:"ondemand"}),$(".your-viewed .catg__list").length>0&&$(".your-viewed .catg__list:not(.slick-initialized)").slick({slidesToScroll:4,slidesToShow:4,infinite:!0,autoplay:!1,dots:!0,lazyLoad:"ondemand"})}function moreContent(){$(".js-show-more-btn").each((function(){var t=$(this).parents('[data-show_more="block"]'),e=t.attr("data-show_more_height");if(e>0){var n=t.find('[data-show_more="content"]'),o=n.outerHeight();o>e&&(n.attr("data-show_more_realheight",o).css({height:e}),$(this).show())}}))}function moreContentChange(){$(document).on("click",".js-show-more-btn",(function(){var t=$(this),e=t.data(),n=t.parents('[data-show_more="block"]'),o=n.find('[data-show_more="content"]');t.text()===e.show_more_btnshow?(o.animate({height:o.attr("data-show_more_realheight")},500),t.text(e.show_more_btnhide),n.addClass("is-opened")):(o.animate({height:n.attr("data-show_more_height")},500),t.text(e.show_more_btnshow),n.removeClass("is-opened"))}))}function mobileMenu(){$(document).on("click",".js-mob-menu-btn-open, .js-mob-menu-btn-close",(function(t){t.preventDefault(),t.stopPropagation(),$(".main-menu__burger").toggleClass("is-opened"),$(".mob-menu").toggleClass("is-opened")})),$(document).on("click",".mob-menu__list-item.is-submenu > .mob-menu__list-link",(function(t){t.preventDefault(),$(this).parents(".mob-menu__list-item.is-submenu").toggleClass("is-opened"),$(this).siblings(".mob-menu__list-submenu").slideToggle(500)})),$(document).on("mouseleave",".mob-menu.is-opened",(function(){$(".main-menu__burger").toggleClass("is-opened"),$(".mob-menu").toggleClass("is-opened")}))}function adaptiveContent(){window.innerWidth}function searchBtn(){window_width>991&&($(document).on("click",'.search-block:not(".is-opened") button',(function(t){t.preventDefault(),$(this).parents(".search-block").addClass("is-opened")})),$(document).mouseup((function(t){var e=$("[data-elem-target]"),n=e.attr("data-elem-target"),o=$('.js-targ[data-elem="'+n+'"]');e.is(t.target)||0!==e.has(t.target).length||o.is(t.target)||0!==o.has(t.target).length||!e.is(".is-opened")||e.removeClass("is-opened")})))}function ajaxDo(){$("body").on("click",".js-do",(function(t){t.preventDefault();var e=$(this).data("action");if("undefined"!=e){"main_onescreen"==e&&$(".main-slider-goods").fadeOut(1e3);"current_page"===$(this).data("action")&&window.location.href,$.post(main_ajax,$(this).data(),(function(t){responseJson(t),$("input[name='phone']").mask("+7(999)999-99-99")}))}}))}function showPopup(t,e){var n=!1;void 0!==e&&(n=!0);var o=$(t).innerHeight(),i=($(window).height()-o)/2;o+160>$(window).height()&&(i=80);var s=468,a=0;n&&void 0!==e.widthCss&&(s=e.widthCss),a=n&&void 0!==e.marLeft?e.marLeft:-s/2,"true"===e.cssAuto&&$(t).css({width:s,"margin-left":a}),n&&void 0===e.darkLay&&$(".form-dark").fadeIn("slow"),"self"!==e.top&&$(t).css("top",i),$(t).addClass("is-show")}function close(){$(document).on("click",".popup__close, .form-dark",(function(){closePopup()}))}function closePopup(){$(".popup").remove(),$(".form-dark").fadeOut()}function formAjax(){$(document).on("submit","form",(function(t){var e=$(this);$(".popup-content__errors").remove(),$("input",e).removeClass("is-error");var n=$(this).serializeArray(),o=!1;if($.each(n,(function(t,e){"action"==e.name&&""!=e.value&&(o=!0)})),o){t.preventDefault();var i=$(this).serialize();$.post(main_ajax,i,(function(t){responseJson(t)}))}}))}function responseJson(t,e=!0){var n=JSON.parse(t);n.func||"ok"!=n.error?n.func||"error"!=n.error||alert(n.message):$(n.selector).html(n.result),new Function(n.func)(),$("input[name='phone']").mask("+7(999)999-99-99")}function moodBoards(){if($(".moodboards__content").length>0){var t=$(".moodboards__content");t.imagesLoaded((function(){t.masonry({columnWidth:t.innerWidth/2,itemSelector:".page-about__moodboard-pic"})}))}}function initTabs(){if(0===$(".js-tabs").length)return!1;$("body").on("click",".js-switch-tab",(function(t){t.preventDefault();var e=$(this),n=$(this).parents(".js-tabs"),o=$(this).attr("data-tab-goal");n.find(".js-switch-tab.is-active").removeClass("is-active"),e.addClass("is-active"),n.find(".js-content-tab.is-active").removeClass("is-active"),$(o).addClass("is-active")}))}function contentOpen(){$("body").on("click",".js-open",(function(){$('[data-open="main-block"]').removeClass("is-opened"),$(this).parents('[data-open="main-block"]').toggleClass("is-opened")}))}function NoTarget(){$(document).mouseup((function(t){var e=$(".page-filter__field");$(".page-filter__popup");e.is(t.target)||0!==e.has(t.target).length||e.removeClass("is-opened");e=$(".kontakty-filter__field"),$(".kontakty__popup");e.is(t.target)||0!==e.has(t.target).length||e.removeClass("is-opened");e=$(".header-city__field"),$(".header-city__popup");e.is(t.target)||0!==e.has(t.target).length||e.removeClass("is-opened")}))}function initProductDetailPhotoGallery(){$(".js-slick-3").length>0&&($(".js-slick-3:not(.slick-initialized)").slick({slidesToScroll:1,draggable:!1,slidesToShow:1,infinite:!0,accessibility:!1,dots:!1,lazyLoad:"ondemand",asNavFor:".js-slick-nav-3"}),$(".js-slick-nav-3:not(.slick-initialized)").slick({slidesToShow:5,slidesToScroll:5,dots:!1,asNavFor:".js-slick-3",variableWidth:!0,infinite:!0,focusOnSelect:!0,vertical:!0,verticalSwiping:!0}))}function inDelay(t){$(t).hasClass("checkbox__label")||$(t).hasClass("js-state-reverse")?($(t).addClass("is-active"),$(t).data("state","Y"),$(t).parent().find("input").prop("checked",!0)):($(t).off(),$(t).addClass("is-active").removeClass("js-do"))}function inDelayList(t){t.forEach((function(t,e,n){inDelay($('.js-do[data-action=delay_change][data-id="'+t+'"]'))}))}function nicescrollInit(){$("#nicescroll").niceScroll(objSetupScroll)}function initScrollGoal(){$(document).on("click",".js-scrollto",(function(){var t=$(this).data("scrollto_goal");$("html, body").animate({scrollTop:$(t).offset().top-150},"250")}))}function EventsGa(){var t={click:{0:{element:".js-event-1",event_ga:"ga('send', 'event', 'brand_page', 'download_katalog');"}}};Object.keys(t).forEach((function(e,n){for(let n=0;n<Object.keys(t[e]).length;n++)$(document).on(e,t[e].element,(function(){t[e][n].event_ga}))}))}$(window).on("resize",(function(){window.innerWidth!=window_width&&adaptiveContent()})),$(document).on("dragover",".standard-form__dis-btn",(function(t){t.stopPropagation(),$(this).addClass("is-hover")})),$(document).on("dragleave dragend drop",".standard-form__dis-btn",(function(t){t.stopPropagation(),$(this).removeClass("is-hover")}));